var xmlPath="configuration.xml";var playlistId;var imageCount;var fontSet;var bacgrounImage;var crousalHeight;var crousalWidth;var crousalPostion;var descriptionBackrounColor;var descriptionBackrounOpacity;var descriptionFontColor;var videoPlayerWidth;var videoPlayerHeight;var videoPlayerX;var videoPlayerY;var imageBorderDefaultColor;var imageBorderSelectedColor;var broserType;function browserTester(a){return navigator.userAgent.toLowerCase().indexOf(a)>-1}var myXmlLoader=function(a){this.main(a)};$.extend(myXmlLoader.prototype,{path:"",main:function(a){this.path=a},xmlLoad:function(){currentData=null;$.ajax({type:"GET",url:this.path,dataType:"xml",success:loadData})}});loadData=function(a){$(a).find("configuration").each(function(){playlistId=$(this).find("playlistId").text();imageCount=$(this).find("imageCount").text();fontSet=$(this).find("fontSet").text();backgrounImage=$(this).find("backgroundUrl").text();crousalHeight=parseInt($(this).find("crousalHeight").text());crousalWidth=parseInt($(this).find("crousalWidth").text());crousalPostion=$(this).find("crousalPostion").text();descriptionBackrounColor=$(this).find("descriptionBackrounColor").text();descriptionBackrounOpacity=$(this).find("descriptionBackrounOpacity").text();descriptionFontColor=$(this).find("descriptionFontColor").text();videoPlayerWidth=$(this).find("videoPlayerWidth").text()+"px";videoPlayerHeight=$(this).find("videoPlayerHeight").text()+"px";videoPlayerX=$(this).find("videoPlayerX").text();videoPlayerY=$(this).find("videoPlayerY").text();TweenMax.to($("#videoDetails"),1,{width:"100%"});imageBorderDefaultColor=$(this).find("imageBorderDefaultColor").text();imageBorderSelectedColor=$(this).find("imageBorderSelectedColor").text();$("#player").css("margin-left",videoPlayerX+"%");$("#player").css("margin-top",videoPlayerY+"%");$("body").css("background","#daeef9 url('"+backgrounImage+"') no-repeat center top");var b=convertToHexColor(descriptionBackrounColor).split(")")[0]+","+descriptionBackrounOpacity+")";$("#videoDetails").css("background-color",b).css("color",descriptionFontColor);$("body").css("font-family",fontSet);if(crousalPostion=="left"){$("#playListThumb").css("float",crousalPostion);$("#playListThumb").css("margin-left","-200px");$("#videoTitle").css("float","right");$("#videoDescription").css("float","right")}else{$("#playListThumb").css("margin-right","50px")}var c=new MyWidget(playlistId,crousalWidth,crousalHeight);c.createCrousal()})};convertToHexColor=function(b){try{var f=$("<div></div>").appendTo("body").css("background-color",b);var a=window.getComputedStyle(f[0]);var e=a.backgroundColor;f.remove();var d=e.substring(0,3)+"a"+e.substring(3);return d}catch(c){txt="There was an error on this page.\n\n";txt+="Error description: "+c.message+"\n\n";txt+="Click OK to continue.\n\n";d="rgba(255,0,255)";return d}};MyWidget=function(a,c,b){this.init(a,c,b)};$.extend(MyWidget.prototype,{_playListID:"",_radiusX:"",_radiusY:"",init:function(a,c,b){this._playListID=a;this._radiusX=c;this._radiusY=b},createCrousal:function(){var j=this._playListID;var b=this._radiusX;var a=this._radiusY;var i=new Array();var h=new Array();var g=new Array();var e=0;var d=300;var c=-1;var f;newVideoLoad=function(k){if(broserType==="safari"){var l="http://www.youtube.com/embed/"+k+"?autoplay=1&amp;enablejsapi=1&amp;origin=http%3A%2F%2Flocalhost";$("#player").attr("src",l)}else{player.stopVideo();player.loadVideoById(k,0,"large")}};parseJson=function(){var l="http://gdata.youtube.com/feeds/api/playlists/"+j+"?v=2&alt=json&max-results="+imageCount+"&callback=?";var k="http://www.youtube.com/watch?v=";$.getJSON(l,function(n){var m="";var o=n.feed.entry.length;$.each(n.feed.entry,function(x,C){var w=x*(Math.PI*2)/n.feed.entry.length;var B=w*180/Math.PI;var u=e+Math.cos(w)*b;var z=d+Math.sin(w)*a;var t=C.title.$t;h.push(t);var A=C.media$group.media$description.$t;g.push(A);var s=C.link[1].href;var y=s.split("/");var q=y[y.length-2];i.push(q);var r=k+q;var p="http://img.youtube.com/vi/"+q+"/mqdefault.jpg";var v=$("<li class='videoItem' data-angle='"+B+"' data-left='"+u+"px;' data-top='"+ +z+"px;'id='item_"+x+"'style='top:"+d+"px;'left:'"+e+"px;' z-index:'"+o+";'><img id='"+q+"'height='150px' width='250px' src='"+p+"'/></li>");o--;$("#playListThumb").append(v)});$(".videoItem").each(function(r,s){var q=parseFloat($(this).attr("data-top"));var p=parseFloat($(this).attr("data-left"));$(s).animate({top:q,left:p,},600,function(){cheakMousePostion();createjs.Ticker.setFPS(100);createjs.Ticker.addEventListener("tick",mover)})})})};mover=function(){$(".videoItem").each(function(k,l){var m=parseFloat($(l).attr("data-angle"));m+=c;var q=m*Math.PI/180;var p=e+Math.cos(q)*b;var o=d+Math.sin(q)*a;var n=Math.round(Math.cos(q-Math.PI)*80);if(crousalPostion=="left"){n=Math.round(Math.cos(q-Math.PI*2)*80)}TweenLite.to($(l),0,{top:o,left:p,zIndex:n});setBorderImage(n,$(l));$(l).attr("data-angle",m)})};setBorderImage=function(k,n){if(k===findHighestZIndex(".videoItem")){$(n).find("img").css({border:"1px solid "+imageBorderSelectedColor,cursor:"pointer",});$(n).css({"margin-top":"-4px"});var m=($(n).attr("id")).split("_")[1];if(f==""||f!=m){$(n).bind("click",onImageClickPlayVideo);$("#videoTitle").html(h[m]);$("#videoDescription").html(g[m]);var o=$("#videoDetails").height();$("#videoDetails").css("height","auto");var l=parseInt($("#videoDetails").height())+20;$("#videoDetails").css("height",l)}f=m}else{$(n).unbind("click",onImageClickPlayVideo);$(n).find("img").css({border:"1px solid "+imageBorderDefaultColor,cursor:"default"})}};findHighestZIndex=function(o){var l=$(o);var k=$.makeArray(l);var p=[0];var m=0;for(var n=0;n<k.length;n++){var q=$(k[n]).css("z-index");p.push(q)}var m=Math.max.apply(Math,p);return m};onImageClickPlayVideo=function(){$("#videoPlayer").css("zIndex",9999);$("#player").css("margin-left",videoPlayerX+"%");$("#player").css("margin-top",videoPlayerY+"%");imageOnClick($(this).find("img").attr("src"));$(this).unbind("click",onImageClickPlayVideo);$("#videoPlayer").bind("click",closePlayer)};imageOnClick=function(l){showPopup();var k=l.split("/")[4];newVideoLoad(k);createjs.Ticker.removeEventListener("tick",mover)};closePlayer=function(){$("#videoPlayer").css("zIndex",0);if(broserType==="safari"){$("#player").attr("src","");$("#videoPlayer").css("visibility","hidden")}else{player.stopVideo();$("#videoPlayer").hide();$("#player").hide()}createjs.Ticker.addEventListener("tick",mover);$("#videoPlayer").unbind("click",closePlayer)};$(window).resize(function(){cheakMousePostion()});cheakMousePostion=function(){var l=0;var o=parseInt($(window).height());var n=o*40/100;var m=n+parseInt($("#videoDetails").height());$("#videoDetails").css("margin-top",n);var k=((o-(a*2))/2)-80;$("#playListThumb").css("margin-top",(k));$(window).bind("mousemove",function(t){var s=o/2;var r=parseInt($("#Main").css("height"));var p=(r/2)-l;if(n>l){c=(l/n)-2}else{if(l>(n)&&l<m){c=0}else{var q=l-m;var u=o-m;c=q/u+1}}l=t.pageY})};parseJson()}});var tag=document.createElement("script");tag.src="http://www.youtube.com/iframe_api";var firstScriptTag=document.getElementsByTagName("script")[0];firstScriptTag.parentNode.insertBefore(tag,firstScriptTag);var player;onYouTubeIframeAPIReady=function(){player=new YT.Player("player",{height:videoPlayerHeight,width:videoPlayerWidth,videoId:"",playerVars:{autoplay:1,wmode:"opaque"},events:{onReady:onPlayerReady,onStateChange:onPlayerStateChange}});if(browserTester("chrome")){broserType="chrome"}else{if(browserTester("safari")){broserType="safari"}}if(broserType==="safari"){hidePopup()}};onPlayerReady=function(a){a.target.stopVideo();hidePopup()};onPlayerStateChange=function(a){};setSize=function(b,a){};showPopup=function(){if(broserType==="safari"){$("#videoPlayer").css("visibility","visible")}else{$("#videoPlayer").show();$("#player").show()}};hidePopup=function(){if(broserType==="safari"){$("#videoPlayer").css("visibility","hidden");$("#status").fadeOut();$("#preloader").delay(1500).fadeOut("slow")}else{$("#videoPlayer").hide();$("#player").hide();$("#status").fadeOut();$("#preloader").delay(20).fadeOut("slow")}};